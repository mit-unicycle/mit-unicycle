{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Reaction Wheel Robot Project Index Building the Prototype 1.1 Underlying Physics 1.2 Components Used 1.3 Manufacturing 1.4 Assembly Instructions 1.5 Wiring Instructions Software Instructions 2.1 Controller Explanation 2.2 Software Environment Setup 2.3 Software Usage 2.4 Tuning Guide Process 3.1 Challenges Faced 3.2 Future Improvements 3.3 Conclusion Introduction Welcome to the EPFL Reaction Wheel Robot Project which was realized by a team of 5 Computer Science students during the 2023 summer semester. Through this complete documentation, we will guide you through the manufacturing and software installation process of the robot. We will also provide you with a detailed description of the software architecture and the different components of the robot, empowering you to further develop the prototype and add new features to it. Project Description Our practical requirements focus on stabilizing a robot holding itself on a pole or an actuated wheel to the ground, having 2 axis of freedom. The requirements include the following: stabilizing the robot along one first axis, then a second perpendicular axis and therefore apply real-time corrections on the linear combinations of the torque along both axis, allowing the whole to self-balance on the pole or the wheel. Physics Background How are we going to produce the necessary force required to stabilize the robot? The answer is by using reaction wheels. A reaction wheel is a type of flywheel used primarily by spacecraft for attitude control without using fuel for rockets or other reaction devices. They are particularly useful when the spacecraft must be rotated by very small amounts, such as keeping a telescope pointed at a star. Reaction wheels can rotate a spacecraft only around its center of mass (see torque). This is compared to the maneuvering thrusters used on many spacecraft, which can also translate the spacecraft, and are therefore located at various places on the spacecraft. Reaction wheels work around a nominal zero rotation speed. However, external torques on the spacecraft may require a change in the angular momentum vector of the spacecraft, and the wheels' rotation rate will change in response. To reactivate zero rotation speed, the wheel is accelerated in the direction opposite to its rotation. The momentum of the wheel opposes the momentum of the spacecraft, slowing the spacecraft. To rotate the spacecraft in a given direction, the wheel is accelerated in that direction. This causes the spacecraft to rotate in the opposite direction, according to Newton's third law. Due to conservation of angular momentum, the rotation of the spacecraft will accelerate, whether or not the wheel is subsequently slowed back down to its nominal speed. To desaturate the reaction wheel, the direction of rotation of the reaction wheel is reversed for a short time. This transfers angular momentum from the spacecraft to the reaction wheel to slow the rotation of the spacecraft. First Draft of the Prototype","title":"Home"},{"location":"#reaction-wheel-robot-project","text":"","title":"Reaction Wheel Robot Project"},{"location":"#index","text":"Building the Prototype 1.1 Underlying Physics 1.2 Components Used 1.3 Manufacturing 1.4 Assembly Instructions 1.5 Wiring Instructions Software Instructions 2.1 Controller Explanation 2.2 Software Environment Setup 2.3 Software Usage 2.4 Tuning Guide Process 3.1 Challenges Faced 3.2 Future Improvements 3.3 Conclusion","title":"Index"},{"location":"#introduction","text":"Welcome to the EPFL Reaction Wheel Robot Project which was realized by a team of 5 Computer Science students during the 2023 summer semester. Through this complete documentation, we will guide you through the manufacturing and software installation process of the robot. We will also provide you with a detailed description of the software architecture and the different components of the robot, empowering you to further develop the prototype and add new features to it.","title":"Introduction"},{"location":"#project-description","text":"Our practical requirements focus on stabilizing a robot holding itself on a pole or an actuated wheel to the ground, having 2 axis of freedom. The requirements include the following: stabilizing the robot along one first axis, then a second perpendicular axis and therefore apply real-time corrections on the linear combinations of the torque along both axis, allowing the whole to self-balance on the pole or the wheel.","title":"Project Description"},{"location":"#physics-background","text":"How are we going to produce the necessary force required to stabilize the robot? The answer is by using reaction wheels. A reaction wheel is a type of flywheel used primarily by spacecraft for attitude control without using fuel for rockets or other reaction devices. They are particularly useful when the spacecraft must be rotated by very small amounts, such as keeping a telescope pointed at a star. Reaction wheels can rotate a spacecraft only around its center of mass (see torque). This is compared to the maneuvering thrusters used on many spacecraft, which can also translate the spacecraft, and are therefore located at various places on the spacecraft. Reaction wheels work around a nominal zero rotation speed. However, external torques on the spacecraft may require a change in the angular momentum vector of the spacecraft, and the wheels' rotation rate will change in response. To reactivate zero rotation speed, the wheel is accelerated in the direction opposite to its rotation. The momentum of the wheel opposes the momentum of the spacecraft, slowing the spacecraft. To rotate the spacecraft in a given direction, the wheel is accelerated in that direction. This causes the spacecraft to rotate in the opposite direction, according to Newton's third law. Due to conservation of angular momentum, the rotation of the spacecraft will accelerate, whether or not the wheel is subsequently slowed back down to its nominal speed. To desaturate the reaction wheel, the direction of rotation of the reaction wheel is reversed for a short time. This transfers angular momentum from the spacecraft to the reaction wheel to slow the rotation of the spacecraft.","title":"Physics Background"},{"location":"#first-draft-of-the-prototype","text":"","title":"First Draft of the Prototype"},{"location":"building/assembly/","text":"Assembly Instructions","title":"Assembly Instructions"},{"location":"building/assembly/#assembly-instructions","text":"","title":"Assembly Instructions"},{"location":"building/components/","text":"Components Used These are the components that we bought to make the robot. NodeMCU esp8266 MPU6050 Gyroscope and Accelerometer Module FSESC 4.12 50A Motor Driver Dilwe 540 Sensored Brushless DC Motor","title":"Components Used"},{"location":"building/components/#components-used","text":"These are the components that we bought to make the robot. NodeMCU esp8266 MPU6050 Gyroscope and Accelerometer Module FSESC 4.12 50A Motor Driver Dilwe 540 Sensored Brushless DC Motor","title":"Components Used"},{"location":"building/manufacturing/","text":"Manufacturing Preliminaries In this section you will find the information related to the realization of the 3D designs,the specification about the printing of our parts and the blueprints of the parts. This section will be separated in 3 parts : the first presenting the parts that can be used for both one and two axis, then the parts specific to the one axis design and finally the parts for the two axis model. For the designs we used Fusion 360 and Prusa 3D printers . Note that every dimension reported on the blueprint are given in millimeters (mm) . How to design a GT-2 pulley with Fusion 360 Common parts : 1.1 The reaction wheel and the spacers 1.2 The teethed pulley 1.3 The motor coupler 1.4 The motor pulley <<<<<<< HEAD 2. First prototype - 2.1 Main platform ======= 3. First prototype : - 2.1 Main plateform 57ba524 (manufacturing gt-2 pulley) - 2.2 Motor shaft holder - 2.3 Reaction wheel holder Second prototype : 4.1 Main plateform 4.2 The Stick 4.3 the motor support 4.4 the motor shaft holder 4.5 the reaction wheel holder how to design a GT-2 parametric design of a pulley What is a GT-2 pulley ? A GT-2 pulley is a type of standard for belts and pulleys, it is defined mostly by the pitch of the teeth and the distance between the edges of two teeth. Here's the description of the parameters we're interested in for designing the teethed pulley. First the value R1 is the inner pitch of the teeth of our pulley, we can think about it as if we small circles of this diameter at the same position at both side of one of the pulley's teeth. Then the R3 parameter if the tooth radius, in the case of the design of the pulley. The parameter P is really important since it is the distance between two teeth ( in mm ). Therefore the diameter is defined by : (P*N)/Pi, with N, the number of teeth we want, therefore by doing basic algebra we can find the perimeter of such a pulley as a function of N and P. How to create the parametric design using fusion parametric design option ? 1. Common parts 1.1 The reaction wheel and the spacers The reaction wheel In order to achieve the maximum moment of inertia for the reaction wheel, our objective was to maximize the diameter of the wheel. Since the moment of inertia is the sum of the squared distances to the mass, the farther the mass is from the axis, the larger the moment will be. However, we faced a constraint due to the size of the printing bed of the printer we used for the distance to the axis. Our experimentation demonstrated that a wheel with a thin design could easily break if the model were to fall. This is why the model we have implemented here is highly robust and should not break, provided it is used correctly in the application of this project. Note that the reaction wheel has 32 holes for the screws used to add weight far from the axis. The most crucial aspect of printing this part is to use an appropriate perimeter setting. Increasing the perimeter setting enables us to reinforce the piece without significantly increasing the infill. It is essential for the holes where we will insert screws, nuts, and the location where the ball bearing will be placed to be sufficiently strong. This ensures that they do not break during rotation or when inserting the ball bearing. Here we used a perimeter of 4 and an infill of : The spacers As you can observe in the section explaining the assembly of the model, we needed spacers with the same inner diameter as the ball bearing to ensure a good fit between the ball bearings. The accompanying design picture, illustrates the dimensions of one of these spacers. Please note that we used spacers of various sizes, but we are presenting only one blueprint as the only difference lies in the height of the spacers. //todo add the list of size of the spacer we use The plates spacers : In order to avoid that the belt hits the nuts from the reaction wheel while working, we needed spacer plates to increase the distance between the teethed pulley therefore we designed the spacing plates here bellow is the design and the dimensions of those spacers. 1.2. The teethed pulley We used GT-2 belts, which necessitated the design of GT-2 pulleys. To achieve this, we employed a functionality in Fusion 360 that enabled us to create parametric designs of the pulleys. This approach facilitated the rapid design of the desired pulley variations and also facilitated testing different gear reduction options. The creation of this design is explained step by steps just bellow The GT-2 pulley follows a specific standard for the teeth, which includes the pitch of the teeth on the pulleys and belts. Therefore, the parametric design of the pulley size depend on the desired number of teethAlt text that's why there is no informations about the diamater of the pulley . In our specific application, the number of teeth required is determined by the desired gear reduction. <<<<<<< HEAD //todo : add parameter list with the explanation of what they correspond to for pulley //todo : explain parameters explain step by step the creation of the parametric design For this particular printing, the most important setting to consider is the precision . Given that we are printing pulleys with small teeth, it is essential for the printing to be as accurate and precise as possible. Here we used the option : 10mm Quality preset from Prusa Slicer . To prevent the belt to skip, we need plates to help the belt stay straight in on the pulley, here's the blueprint of those plates : //todo : add parameter list with the explaination of what they correspond to for pulley //todo : explain parameters explain step by step the creation of the parametric design //todo : add a page where I describe the parametric design of the pulley and what the parameters represent For this particular printing, the most important setting to consider is the precision . Given that we are printing pulleys with small teeth, it is essential for the printing to be as accurate and precise as possible. Here we used the option : 10mm Quality preset from Prusa Slicer . To prevent the belt to skip, we need plates to help the belt stay straight in on the pulley, here's the blueprint of thoses plates : 57ba524 (manufacturing gt-2 pulley) 1.3. Motor coupler For the motor coupler, we machined them using the tools available to us. This approach enabled us to create a high-quality coupler specifically designed for the motor we had. We were unable to find any suitable couplers for purchase online that could be delivered within a reasonable time frame, which is why we resorted to machining our own. Here's the blueprint we created for this coupler //todo : modify drawing, 3mm of thickness 1.4. The motor pulley : To do the gear reduction we wanted we needed to fix a small teethed pulley to the motor coupler. We needed this pulley to be small enough to avoid printing enormous pulley if we wanted to modify the gears reduction. Increasing the reduction means modifying the height of the reaction wheel it could also mean buying new belts if the diameter of the pulley is too big. The minimum diameter of the pulley (which is in fact a constraint on the number of teeth) is limited by the screwholes position of the motor coupler. //todo : add the function that allows to calculate the radius of the pulley ! again there is no informations about the pulley's diameter on the blueprint since it depends on the number of teeth ! 2. First prototype : 1. Support plate : As the first prototype purpose is to balance in one axis of freedom, we needed a plate where we could fit the motor, the ESC, the breadboard and the esp8266. Note that for the first prototype we did all the tests without the battery mounted. First prototype : reaction wheel older : The part here bellow is designed to hold the threaded rod to hold the reaction wheel. Sources of the images GT pulley informations taken from : https://openbuildspartstore.com/","title":"**Manufacturing**"},{"location":"building/manufacturing/#manufacturing","text":"","title":"Manufacturing"},{"location":"building/manufacturing/#preliminaries","text":"In this section you will find the information related to the realization of the 3D designs,the specification about the printing of our parts and the blueprints of the parts. This section will be separated in 3 parts : the first presenting the parts that can be used for both one and two axis, then the parts specific to the one axis design and finally the parts for the two axis model. For the designs we used Fusion 360 and Prusa 3D printers . Note that every dimension reported on the blueprint are given in millimeters (mm) . How to design a GT-2 pulley with Fusion 360 Common parts : 1.1 The reaction wheel and the spacers 1.2 The teethed pulley 1.3 The motor coupler 1.4 The motor pulley <<<<<<< HEAD 2. First prototype - 2.1 Main platform ======= 3. First prototype : - 2.1 Main plateform 57ba524 (manufacturing gt-2 pulley) - 2.2 Motor shaft holder - 2.3 Reaction wheel holder Second prototype : 4.1 Main plateform 4.2 The Stick 4.3 the motor support 4.4 the motor shaft holder 4.5 the reaction wheel holder","title":"Preliminaries"},{"location":"building/manufacturing/#how-to-design-a-gt-2-parametric-design-of-a-pulley","text":"What is a GT-2 pulley ? A GT-2 pulley is a type of standard for belts and pulleys, it is defined mostly by the pitch of the teeth and the distance between the edges of two teeth. Here's the description of the parameters we're interested in for designing the teethed pulley. First the value R1 is the inner pitch of the teeth of our pulley, we can think about it as if we small circles of this diameter at the same position at both side of one of the pulley's teeth. Then the R3 parameter if the tooth radius, in the case of the design of the pulley. The parameter P is really important since it is the distance between two teeth ( in mm ). Therefore the diameter is defined by : (P*N)/Pi, with N, the number of teeth we want, therefore by doing basic algebra we can find the perimeter of such a pulley as a function of N and P. How to create the parametric design using fusion parametric design option ?","title":"how to design a GT-2 parametric design of a pulley"},{"location":"building/manufacturing/#1-common-parts","text":"","title":"1. Common parts"},{"location":"building/manufacturing/#11-the-reaction-wheel-and-the-spacers","text":"The reaction wheel In order to achieve the maximum moment of inertia for the reaction wheel, our objective was to maximize the diameter of the wheel. Since the moment of inertia is the sum of the squared distances to the mass, the farther the mass is from the axis, the larger the moment will be. However, we faced a constraint due to the size of the printing bed of the printer we used for the distance to the axis. Our experimentation demonstrated that a wheel with a thin design could easily break if the model were to fall. This is why the model we have implemented here is highly robust and should not break, provided it is used correctly in the application of this project. Note that the reaction wheel has 32 holes for the screws used to add weight far from the axis. The most crucial aspect of printing this part is to use an appropriate perimeter setting. Increasing the perimeter setting enables us to reinforce the piece without significantly increasing the infill. It is essential for the holes where we will insert screws, nuts, and the location where the ball bearing will be placed to be sufficiently strong. This ensures that they do not break during rotation or when inserting the ball bearing. Here we used a perimeter of 4 and an infill of : The spacers As you can observe in the section explaining the assembly of the model, we needed spacers with the same inner diameter as the ball bearing to ensure a good fit between the ball bearings. The accompanying design picture, illustrates the dimensions of one of these spacers. Please note that we used spacers of various sizes, but we are presenting only one blueprint as the only difference lies in the height of the spacers. //todo add the list of size of the spacer we use The plates spacers : In order to avoid that the belt hits the nuts from the reaction wheel while working, we needed spacer plates to increase the distance between the teethed pulley therefore we designed the spacing plates here bellow is the design and the dimensions of those spacers.","title":"1.1 The reaction wheel and the spacers"},{"location":"building/manufacturing/#12-the-teethed-pulley","text":"We used GT-2 belts, which necessitated the design of GT-2 pulleys. To achieve this, we employed a functionality in Fusion 360 that enabled us to create parametric designs of the pulleys. This approach facilitated the rapid design of the desired pulley variations and also facilitated testing different gear reduction options. The creation of this design is explained step by steps just bellow The GT-2 pulley follows a specific standard for the teeth, which includes the pitch of the teeth on the pulleys and belts. Therefore, the parametric design of the pulley size depend on the desired number of teethAlt text that's why there is no informations about the diamater of the pulley . In our specific application, the number of teeth required is determined by the desired gear reduction. <<<<<<< HEAD //todo : add parameter list with the explanation of what they correspond to for pulley //todo : explain parameters explain step by step the creation of the parametric design","title":"1.2. The teethed pulley"},{"location":"building/manufacturing/#for-this-particular-printing-the-most-important-setting-to-consider-is-the-precision-given-that-we-are-printing-pulleys-with-small-teeth-it-is-essential-for-the-printing-to-be-as-accurate-and-precise-as-possible-here-we-used-the-option-10mm-quality-preset-from-prusa-slicer-to-prevent-the-belt-to-skip-we-need-plates-to-help-the-belt-stay-straight-in-on-the-pulley-heres-the-blueprint-of-those-plates","text":"//todo : add parameter list with the explaination of what they correspond to for pulley //todo : explain parameters explain step by step the creation of the parametric design //todo : add a page where I describe the parametric design of the pulley and what the parameters represent For this particular printing, the most important setting to consider is the precision . Given that we are printing pulleys with small teeth, it is essential for the printing to be as accurate and precise as possible. Here we used the option : 10mm Quality preset from Prusa Slicer . To prevent the belt to skip, we need plates to help the belt stay straight in on the pulley, here's the blueprint of thoses plates : 57ba524 (manufacturing gt-2 pulley)","title":"For this particular printing, the most important setting to consider is the precision. Given that we are printing pulleys with small teeth, it is essential for the printing to be as accurate and precise as possible. Here we used the option : 10mm Quality preset from Prusa Slicer. To prevent the belt to skip, we need plates to help the belt stay straight in on the pulley, here's the blueprint of those plates :"},{"location":"building/manufacturing/#13-motor-coupler","text":"For the motor coupler, we machined them using the tools available to us. This approach enabled us to create a high-quality coupler specifically designed for the motor we had. We were unable to find any suitable couplers for purchase online that could be delivered within a reasonable time frame, which is why we resorted to machining our own. Here's the blueprint we created for this coupler //todo : modify drawing, 3mm of thickness","title":"1.3. Motor coupler"},{"location":"building/manufacturing/#14-the-motor-pulley","text":"To do the gear reduction we wanted we needed to fix a small teethed pulley to the motor coupler. We needed this pulley to be small enough to avoid printing enormous pulley if we wanted to modify the gears reduction. Increasing the reduction means modifying the height of the reaction wheel it could also mean buying new belts if the diameter of the pulley is too big. The minimum diameter of the pulley (which is in fact a constraint on the number of teeth) is limited by the screwholes position of the motor coupler. //todo : add the function that allows to calculate the radius of the pulley ! again there is no informations about the pulley's diameter on the blueprint since it depends on the number of teeth !","title":"1.4. The motor pulley :"},{"location":"building/manufacturing/#2-first-prototype","text":"1. Support plate : As the first prototype purpose is to balance in one axis of freedom, we needed a plate where we could fit the motor, the ESC, the breadboard and the esp8266. Note that for the first prototype we did all the tests without the battery mounted.","title":"2. First prototype :"},{"location":"building/manufacturing/#first-prototype-reaction-wheel-older","text":"The part here bellow is designed to hold the threaded rod to hold the reaction wheel.","title":"First prototype : reaction wheel older :"},{"location":"building/manufacturing/#sources-of-the-images","text":"GT pulley informations taken from : https://openbuildspartstore.com/","title":"Sources of the images"},{"location":"building/physics/","text":"Underlying Physics In order to build a functioning balancing robot, it is really important to understand the physics that make it work. In this section, we will address this.","title":"Underlying Physics"},{"location":"building/physics/#underlying-physics","text":"In order to build a functioning balancing robot, it is really important to understand the physics that make it work. In this section, we will address this.","title":"Underlying Physics"},{"location":"building/wiring/","text":"Wiring Instructions","title":"Wiring Instructions"},{"location":"building/wiring/#wiring-instructions","text":"","title":"Wiring Instructions"},{"location":"process/challenges/","text":"Challenges Faced","title":"Challenges Faced"},{"location":"process/challenges/#challenges-faced","text":"","title":"Challenges Faced"},{"location":"process/conclusion/","text":"Conclusion","title":"Conclusion"},{"location":"process/conclusion/#conclusion","text":"","title":"Conclusion"},{"location":"process/improvements/","text":"Future Improvements","title":"Future Improvements"},{"location":"process/improvements/#future-improvements","text":"","title":"Future Improvements"},{"location":"software/controller/","text":"Controller Explanation To have a better ease of use and comprehension of the software, it is important to understand how the angular speed of the wheel is controlled. PID Controller To control the speed of rotation of the wheel, we use control loop called Proportional-Integral-Derivative Controller or PID Controller for short. In the image below, we can see an overview of this controller: $r(t) =$ Setpoint (SP) $u(t) =$ Control Variable $y(t) =$ Process Variable $e(t) =$ Error Variable Such a controller works in the following way. First, a setpoint (SP) is chosen. The SP is the desired position that the robot should achieve. In our case, it would correspond to a small roll angle. If the angle is small, it means that the robot is in balance. Note that in an ideal world, the SP would be $0\u00b0$. However, since the weight of the robot is not perfectly distributed, the $r(t) \\in \\left{ -5\u00b0, 5 \\right}$. Later, we will also explain how and why we must adjust the SP dynamically to achieve greater stability. Then, the controller computes the error variable : $$e(t) = r(t) - y(t)$$ The error represents how \"far\" the robot is to the SP. After that, the error variable is passed through three different channels: proportional (P), integral (I) and derivative (D) . Each channel possess a so-called gain : $K_{p}, K_{i}$ and $K_{d}$ respectively. These gains are constants defined by the user of the PID controller to determine the effect or \"weight\" of each channel on the control variable $u(t)$. By doing so, the desired behavior is achieved. In the P channel, the error variable is simply multiplied by the constant $K_{p}$. In the I channel, the error is integrated w.r.t. time and then multiplied by $K_{i}$. Finally, in the D channel, the error is derived w.r.t. time and then multiplied by $K_{d}$. Thus, the control variable can be expressed as: $$u(t) = K_\\text{p} e(t) + K_\\text{i} \\int_0^t e(\\tau) \\,\\mathrm{d}\\tau + K_\\text{d} \\frac{\\mathrm{d}e(t)}{\\mathrm{d}t}$$ The control variable is then fed to the motor in the form of a PWM signal or the RPM at which it should spin. Finally, the process variable $y(t)$, in our case, the newly measured angle, is fed back and the new error variable $e(t)$ is computed. Then, the loop begins again. Understanding the Effect of Each Channel Let us examine the effect of each channel to understand how they may help us to achieve a robot that balances itself. Suppose that we are only using the proportional path , that is $K_{i}$ and $K_{d}$ are set to zero: $$u(t) = K_{p}e(t)$$ Suppose too that the motor must accelerate to a speed of 100 RPM to counteract the torque exerted by gravity on the robot. Then, by increasing the $K_{p}$, we can decrease the error: Error $e(t)$ Gain $K_{p}$ RPM $u(t)$ 50 2 100 20 5 100 10 10 100 1 100 100 On a first glance, this seems enough. However, looking closely, we notice that no matter how big the $K_{p}$ is set to, there will always be a a small error. This particular type of error is often called steady state error , and it is the integral channel purpose to eliminate. Let us suppose that we set $K_{p} = 20$ and we reduced the error to $e(t) = 5^{\\circ}$: Although the motor is already spinning at 100 RPM, the error $e(t)$ has not yet been reduced to $0^{\\circ}$. This is where the integral channel comes in.","title":"Controller Explanation"},{"location":"software/controller/#controller-explanation","text":"To have a better ease of use and comprehension of the software, it is important to understand how the angular speed of the wheel is controlled.","title":"Controller Explanation"},{"location":"software/controller/#pid-controller","text":"To control the speed of rotation of the wheel, we use control loop called Proportional-Integral-Derivative Controller or PID Controller for short. In the image below, we can see an overview of this controller: $r(t) =$ Setpoint (SP) $u(t) =$ Control Variable $y(t) =$ Process Variable $e(t) =$ Error Variable Such a controller works in the following way. First, a setpoint (SP) is chosen. The SP is the desired position that the robot should achieve. In our case, it would correspond to a small roll angle. If the angle is small, it means that the robot is in balance. Note that in an ideal world, the SP would be $0\u00b0$. However, since the weight of the robot is not perfectly distributed, the $r(t) \\in \\left{ -5\u00b0, 5 \\right}$. Later, we will also explain how and why we must adjust the SP dynamically to achieve greater stability. Then, the controller computes the error variable : $$e(t) = r(t) - y(t)$$ The error represents how \"far\" the robot is to the SP. After that, the error variable is passed through three different channels: proportional (P), integral (I) and derivative (D) . Each channel possess a so-called gain : $K_{p}, K_{i}$ and $K_{d}$ respectively. These gains are constants defined by the user of the PID controller to determine the effect or \"weight\" of each channel on the control variable $u(t)$. By doing so, the desired behavior is achieved. In the P channel, the error variable is simply multiplied by the constant $K_{p}$. In the I channel, the error is integrated w.r.t. time and then multiplied by $K_{i}$. Finally, in the D channel, the error is derived w.r.t. time and then multiplied by $K_{d}$. Thus, the control variable can be expressed as: $$u(t) = K_\\text{p} e(t) + K_\\text{i} \\int_0^t e(\\tau) \\,\\mathrm{d}\\tau + K_\\text{d} \\frac{\\mathrm{d}e(t)}{\\mathrm{d}t}$$ The control variable is then fed to the motor in the form of a PWM signal or the RPM at which it should spin. Finally, the process variable $y(t)$, in our case, the newly measured angle, is fed back and the new error variable $e(t)$ is computed. Then, the loop begins again.","title":"PID Controller"},{"location":"software/controller/#understanding-the-effect-of-each-channel","text":"Let us examine the effect of each channel to understand how they may help us to achieve a robot that balances itself. Suppose that we are only using the proportional path , that is $K_{i}$ and $K_{d}$ are set to zero: $$u(t) = K_{p}e(t)$$ Suppose too that the motor must accelerate to a speed of 100 RPM to counteract the torque exerted by gravity on the robot. Then, by increasing the $K_{p}$, we can decrease the error: Error $e(t)$ Gain $K_{p}$ RPM $u(t)$ 50 2 100 20 5 100 10 10 100 1 100 100 On a first glance, this seems enough. However, looking closely, we notice that no matter how big the $K_{p}$ is set to, there will always be a a small error. This particular type of error is often called steady state error , and it is the integral channel purpose to eliminate. Let us suppose that we set $K_{p} = 20$ and we reduced the error to $e(t) = 5^{\\circ}$: Although the motor is already spinning at 100 RPM, the error $e(t)$ has not yet been reduced to $0^{\\circ}$. This is where the integral channel comes in.","title":"Understanding the Effect of Each Channel"},{"location":"software/setup/","text":"Software Setup","title":"Software Setup"},{"location":"software/setup/#software-setup","text":"","title":"Software Setup"},{"location":"software/tuning/","text":"Tuning Guide","title":"Tuning Guide"},{"location":"software/tuning/#tuning-guide","text":"","title":"Tuning Guide"},{"location":"software/usage/","text":"Software Usage","title":"Software Usage"},{"location":"software/usage/#software-usage","text":"","title":"Software Usage"}]}